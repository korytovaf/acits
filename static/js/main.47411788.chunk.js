(this.webpackJsonpacits=this.webpackJsonpacits||[]).push([[0],{25:function(e,t,n){e.exports={modal_wrapper:"modal_modal_wrapper__2IgLt",showBackground:"modal_showBackground__16S8Z",modal_content:"modal_modal_content__3maq_",show:"modal_show__3xBni"}},66:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n(1),s=n.n(c),r=n(19),i=n.n(r),l=n(4),o=n(15),j=n.n(o),d=function(e,t){return j()({method:"get",url:"https://acits-api.herokuapp.com/api/v1/animals/".concat(t),headers:{"Content-Type":"application/json",Authorization:"Bearer "+e,"current-shelter":1}})},b=n(9),u="SET_IS_AUTH",h="SET_PRESCRIPTIONS",m="SET_ANIMALS",p="SET_ONE_ANIMALS",O="SET_NEXT_PAGE_ANIMALS",x=function(e){return{type:p,payload:e}},f=Object(b.b)(null,(function(e){return{setIsAuth:function(){return e({type:u})}}}))((function(e){var t=e.setIsAuth,n=Object(c.useState)(""),s=Object(l.a)(n,2),r=s[0],i=s[1],o=Object(c.useState)(""),d=Object(l.a)(o,2),b=d[0],u=d[1],h=Object(c.useState)(!0),m=Object(l.a)(h,2),p=m[0],O=m[1],x=Object(c.useState)(!0),f=Object(l.a)(x,2),g=f[0],v=f[1],N=Object(c.useState)(""),_=Object(l.a)(N,2),y=_[0],S=_[1],A=Object(c.useState)(!1),w=Object(l.a)(A,2),E=w[0],C=w[1];return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("div",{className:"card w-50 mx-auto mt-5",children:[Object(a.jsx)("div",{className:"mt-3 text-danger text-center",children:y}),Object(a.jsxs)("form",{className:"card-body",onSubmit:function(e){e.preventDefault(),0===r.length&&O(!1),0===b.length&&v(!1),0!==r.length&&0!==b.length&&(C(!0),function(e,t){return j()({method:"post",url:"https://acits-api.herokuapp.com/api/token/",data:{username:e,password:t},headers:{"Content-Type":"application/json"}})}(r,b).then((function(e){localStorage.setItem("access",e.data.access),t()})).catch((function(e){401===e.response.status&&(i(""),u(""),S("\u041d\u0435 \u0432\u0435\u0440\u043d\u044b\u0435 \u0438\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c"),C(!1))})))},children:[Object(a.jsxs)("div",{className:"mb-3",children:[Object(a.jsx)("label",{htmlFor:"titleLogin",children:"\u041b\u043e\u0433\u0438\u043d"}),Object(a.jsx)("input",{type:"text",className:p?"form-control":"form-control border border-danger",id:"Login",value:r,onChange:function(e){i(e.target.value),O(!0),S("")}}),Object(a.jsx)("div",{className:"text-danger",children:p?"":"\u041f\u043e\u043b\u0435 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c"})]}),Object(a.jsxs)("div",{className:"mb-3 error",children:[Object(a.jsx)("label",{htmlFor:"password",children:"\u041f\u0430\u0440\u043e\u043b\u044c"}),Object(a.jsx)("input",{type:"password",className:g?"form-control":"form-control border border-danger",id:"password",value:b,onChange:function(e){u(e.target.value),v(!0),S("")}}),Object(a.jsx)("div",{className:"text-danger",children:g?"":"\u041f\u043e\u043b\u0435 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c"})]}),Object(a.jsxs)("button",{disabled:E,className:"btn btn-primary",type:"submit",children:["\u0412\u043e\u0439\u0442\u0438",E&&Object(a.jsx)("span",{className:"spinner-border spinner-border-sm ms-3",role:"status","aria-hidden":"true"})]})]})]})})})),g=n(3),v=n(25),N=n.n(v),_=function(e){var t=e.isOpen,n=e.setIsOpen,c=e.children,s=e.object,r=e.refModal,i=e.refCloseButton;return t&&s&&Object(a.jsx)("div",{ref:r,onClick:n,className:N.a.modal_wrapper,children:Object(a.jsxs)("div",{className:N.a.modal_content,children:[Object(a.jsxs)("div",{className:"card-header p-2 d-flex justify-content-between",children:[Object(a.jsx)("h3",{children:s.name}),Object(a.jsx)("button",{ref:i,onClick:n,type:"button",className:"btn-close"})]}),Object(a.jsx)("div",{className:"modal_body card-body",children:s?c:"\u041e\u0439.."})]})})},y=function(e){var t=e.animal,n=(new Date).getFullYear()-new Date(t.birth_date).getFullYear();return Object(a.jsxs)("div",{className:"modal-body",children:[Object(a.jsxs)("div",{className:"mb-1",children:[Object(a.jsx)("span",{children:"\u041a\u043b\u0438\u0447\u043a\u0430 - "}),Object(a.jsx)("span",{children:t.name?t.name:"\u043d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u0430"})]}),Object(a.jsxs)("div",{className:"mb-1",children:[Object(a.jsx)("span",{children:"\u0416\u0438\u0432\u043e\u0442\u043d\u043e\u0435 - "}),Object(a.jsx)("span",{children:t.spec_parent_name?t.spec_parent_name:"\u043d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u043e"})]}),Object(a.jsxs)("div",{className:"mb-1",children:[Object(a.jsx)("span",{children:"\u041f\u043e\u0440\u043e\u0434\u0430 - "}),Object(a.jsx)("span",{children:t.spec_name?t.spec_name:"\u043d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u0430"})]}),Object(a.jsxs)("div",{className:"mb-1",children:[Object(a.jsx)("span",{children:"\u0421\u0440\u0435\u0434\u0430 \u043e\u0431\u0438\u0442\u0430\u043d\u0438\u044f - "}),Object(a.jsx)("span",{children:t.spec_category_name?t.spec_category_name:"\u043d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u0430"})]}),Object(a.jsxs)("div",{className:"mb-1",children:[Object(a.jsx)("span",{children:"\u0412\u043e\u0437\u0440\u0430\u0441\u0442 - "}),Object(a.jsx)("span",{children:t.birth_date?n:"\u043d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u0435\u043d"})]})]})},S=Object(b.b)((function(e){return{prescriptions:e.today.prescriptions,animal:e.animal.animal}}),(function(e){return{setPrescriptions:function(t){return e(function(e){return{type:h,payload:e}}(t))},setOneAnimal:function(t){return e(x(t))}}}))((function(e){var t=e.prescriptions,n=e.setPrescriptions,s=e.setOneAnimal,r=e.animal,i=localStorage.getItem("access"),o=Object(c.useState)(!1),b=Object(l.a)(o,2),u=b[0],h=b[1],m=Object(c.useState)(null),p=Object(l.a)(m,2),O=p[0],x=p[1],f=Object(c.useRef)(null),g=Object(c.useRef)(null);Object(c.useEffect)((function(){(function(e){return j()({method:"get",url:"https://acits-api.herokuapp.com/api/v1/prescriptions/today/",headers:{"Content-Type":"application/json",Authorization:"Bearer "+e,"current-shelter":1}})})(i).then((function(e){n(e.data.results)})).catch((function(e){console.log("\u041e\u0439..")}))}),[i,n]),Object(c.useEffect)((function(){O&&d(i,O).then((function(e){s(e.data)})).catch((function(e){console.log("\u041e\u0439..")}))}),[i,O,s]);return t.length?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(_,{refCloseButton:g,refModal:f,isOpen:u,object:r,setIsOpen:function(e){e.target!==f.current&&e.target!==g.current||(h(!1),s(null))},children:Object(a.jsx)(y,{animal:r})}),Object(a.jsx)("h1",{className:"mt-5",children:"\u0421\u0435\u0433\u043e\u0434\u043d\u044f"}),Object(a.jsxs)("table",{className:"table table-hover",children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{scope:"col",children:"#"}),Object(a.jsx)("th",{scope:"col",children:"\u041a\u043b\u0438\u0447\u043a\u0430"}),Object(a.jsx)("th",{scope:"col",children:"\u041d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u0432\u0440\u0430\u0447\u0430"})]})}),Object(a.jsx)("tbody",{children:t.map((function(e,t){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{scope:"row",children:t}),Object(a.jsx)("td",{onClick:function(){h(!0),x(e.animal.id)},children:e.animal.name}),Object(a.jsx)("td",{children:e.my_type})]},t)}))})]})]}):Object(a.jsx)("div",{className:"d-flex justify-content-center mt-5",children:Object(a.jsx)("div",{className:"spinner-border",role:"status",children:Object(a.jsx)("span",{className:"visually-hidden",children:"Loading..."})})})})),A=Object(b.b)((function(e){return{count:e.animal.count,pageSize:e.animal.pageSize,next:e.animal.nextPageAnimals,prev:e.animal.prevPageAnimals}}))((function(e){for(var t=e.count,n=e.pageSize,s=e.next,r=e.prev,i=e.setNextPage,o=Math.ceil(t/n),j=[],d=0,b=1;b<=o;b++){var u="api/v1/animals/?limit=".concat(n,"&offset=").concat(d);j.push({pageNumber:b,urlPage:u}),d+=n}var h=Object(c.useState)(1),m=Object(l.a)(h,2),p=m[0],O=m[1];return Object(a.jsxs)("div",{className:"d-flex mt-5",children:[Object(a.jsx)("button",{disabled:!r,onClick:function(){i(r),O(p-1)},className:"btn btn-primary",children:"prev"}),Object(a.jsx)("div",{className:"mx-3",children:j.map((function(e){return Object(a.jsx)("button",{onClick:function(){i(e.urlPage),O(e.pageNumber)},className:p===e.pageNumber?"btn btn-light fw-bold":"btn",children:e.pageNumber},e.pageNumber)}))}),Object(a.jsx)("button",{disabled:!s,onClick:function(){i(s),O(p+1)},className:"btn btn-primary",children:"next"})]})})),w=Object(b.b)((function(e){return{animals:e.animal.animals,animal:e.animal.animal,pageSize:e.animal.pageSize}}),(function(e){return{setAnimals:function(t){return e(function(e){return{type:m,payload:e}}(t))},setOneAnimal:function(t){return e(x(t))}}}))((function(e){var t=e.animals,n=e.animal,s=e.setAnimals,r=e.setOneAnimal,i=e.pageSize,o=localStorage.getItem("access"),b=Object(c.useState)(!1),u=Object(l.a)(b,2),h=u[0],m=u[1],p=Object(c.useState)(null),O=Object(l.a)(p,2),x=O[0],f=O[1],g=Object(c.useRef)(null),v=Object(c.useRef)(null),N=Object(c.useState)(null),S=Object(l.a)(N,2),w=S[0],E=S[1];Object(c.useEffect)((function(){(function(e,t){return j()({method:"get",url:"https://acits-api.herokuapp.com/api/v1/animals/?limit=".concat(t),headers:{"Content-Type":"application/json",Authorization:"Bearer "+e,"current-shelter":1}})})(o,i).then((function(e){s(e.data)}))}),[o,s,i]),Object(c.useEffect)((function(){w&&function(e,t){return j()({method:"get",url:"https://acits-api.herokuapp.com/".concat(t),headers:{"Content-Type":"application/json",Authorization:"Bearer "+e,"current-shelter":1}})}(o,w).then((function(e){s(e.data)}))}),[o,s,w]),Object(c.useEffect)((function(){x&&d(o,x).then((function(e){r(e.data)}))}),[o,x,r]);return t.length?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(_,{refCloseButton:v,refModal:g,isOpen:h,object:n,setIsOpen:function(e){e.target!==g.current&&e.target!==v.current||(m(!1),r(null))},children:Object(a.jsx)(y,{animal:n})}),Object(a.jsxs)("div",{className:"mt-5 mb-3 d-flex justify-content-between align-items-start",children:[Object(a.jsx)("h1",{children:"\u0416\u0438\u0432\u043e\u0442\u043d\u044b\u0435"}),Object(a.jsx)(A,{setNextPage:E})]}),Object(a.jsxs)("table",{className:"table table-hover",children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{scope:"col",children:"#"}),Object(a.jsx)("th",{scope:"col",children:"\u041a\u043b\u0438\u0447\u043a\u0430"}),Object(a.jsx)("th",{scope:"col",children:"\u0422\u0438\u043f \u0436\u0438\u0432\u043e\u0442\u043d\u043e\u0433\u043e"}),Object(a.jsx)("th",{scope:"col",children:"\u041f\u043e\u0440\u043e\u0434\u0430"})]})}),Object(a.jsx)("tbody",{children:t.map((function(e,t){return Object(a.jsxs)("tr",{onClick:function(){m(!0),f(e.id)},children:[Object(a.jsx)("th",{scope:"row",children:t+1}),Object(a.jsx)("td",{children:e.name}),Object(a.jsx)("td",{children:e.spec_parent_name}),Object(a.jsx)("td",{children:e.spec_name})]},t)}))})]})]}):Object(a.jsx)("div",{className:"d-flex justify-content-center mt-5",children:Object(a.jsx)("div",{className:"spinner-border",role:"status",children:Object(a.jsx)("span",{className:"visually-hidden",children:"Loading..."})})})})),E=n(14),C=function(){return Object(a.jsx)("header",{children:Object(a.jsx)("nav",{className:"navbar navbar-light bg-light",children:Object(a.jsxs)("div",{className:"container-fluid justify-content-start",children:[Object(a.jsx)(E.b,{className:"navbar-brand",to:"/acits/today",children:"\u0421\u0435\u0433\u043e\u0434\u043d\u044f"}),Object(a.jsx)(E.b,{className:"navbar-brand",to:"/acits/animals",children:"\u0416\u0438\u0432\u043e\u0442\u043d\u044b\u0435"})]})})})};var I=Object(b.b)((function(e){return{isAuth:e.login.isAuth}}))((function(e){var t=e.isAuth;return Object(a.jsx)("div",{className:"container",children:t?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(C,{}),Object(a.jsxs)(g.d,{children:[Object(a.jsx)(g.b,{path:"/acits/today",component:S}),Object(a.jsx)(g.b,{path:"/acits/animals",component:w}),Object(a.jsx)(g.a,{from:"/acits/",to:"/acits/today"})]})]}):Object(a.jsxs)(g.d,{children:[Object(a.jsx)(g.b,{path:"/acits/login",component:f}),Object(a.jsx)(g.a,{from:"/acits/",to:"/acits/login"})]})})})),P=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,67)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,s=t.getLCP,r=t.getTTFB;n(e),a(e),c(e),s(e),r(e)}))},T=n(12),k={isAuth:!1,token:""},B=n(18),F=n(11),L={prescriptions:[]},z={animals:[],animal:null,pageSize:10,count:null,nextPageAnimals:"",prevPageAnimals:""},D=Object(T.b)({login:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u:return{isAuth:!0};default:return e}},today:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:return Object(F.a)(Object(F.a)({},e),{},{prescriptions:Object(B.a)(t.payload)});default:return e}},animal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:return Object(F.a)(Object(F.a)({},e),{},{animals:Object(B.a)(t.payload.results),nextPageAnimals:t.payload.next,prevPageAnimals:t.payload.previous,count:t.payload.count});case p:return Object(F.a)(Object(F.a)({},e),{},{animal:t.payload});case O:return Object(F.a)(Object(F.a)({},e),{},{animals:Object(B.a)(t.payload.results),nextPageAnimals:t.payload.next,prevPageAnimals:t.payload.prev});default:return e}}}),M=Object(T.d)(D,Object(T.c)(window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()));i.a.render(Object(a.jsx)(s.a.StrictMode,{children:Object(a.jsx)(b.a,{store:M,children:Object(a.jsx)(E.a,{children:Object(a.jsx)(I,{})})})}),document.getElementById("root")),P()}},[[66,1,2]]]);
//# sourceMappingURL=main.47411788.chunk.js.map